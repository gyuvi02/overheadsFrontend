<div class="user-menu" *ngIf="isLoggedIn$ | async">
  <div class="menu-buttons">
    <!-- Regular user buttons - only visible for non-admin users -->
    <div *ngIf="!isAdmin">
      <button appButton (click)="onSubmitNewMeterValue()">
        Submit meter value
      </button>
      <button appButton (click)="onCheckLatestMeterValues()">
        Check latest values
      </button>
    </div>

    <!-- Admin buttons - only visible for admin users -->
    <div *ngIf="isAdmin" class="admin-buttons">
      <h3>Admin Functions</h3>

      <!-- Meter functions -->
      <button appButton class="parent-menu-button" (click)="toggleSection('meter')">
        Meter functions
      </button>
      <div class="child-menu-buttons" [ngClass]="{'open': openSection === 'meter'}">
        <button appButton (click)="onGetAdminData()">
          Get latest values
        </button>
        <button appButton (click)="onGetAdminLists()">
          Get 12 latest values
        </button>
        <button appButton (click)="onAdminSubmitData()">
          Submit meter value
        </button>
        <button appButton (click)="onAddDefault()">
          Add default meters
        </button>
      </div>

      <!-- User functions -->
      <button appButton class="parent-menu-button" (click)="toggleSection('user')">
        User functions
      </button>
      <div class="child-menu-buttons" [ngClass]="{'open': openSection === 'user'}">
        <button appButton (click)="onEditUsers()">
          Edit users
        </button>
        <button appButton (click)="onSendEmail()">
          Send email
        </button>
        <button appButton (click)="onSendEmail()">
          Delete user
        </button>
      </div>

      <!-- Apartment functions -->
      <button appButton class="parent-menu-button" (click)="toggleSection('apartment')">
        Apartment functions
      </button>
      <div class="child-menu-buttons" [ngClass]="{'open': openSection === 'apartment'}">
        <button appButton (click)="onEditApartment()">
          Edit apartment
        </button>
        <button appButton (click)="onAddApartment()">
          Add apartment
        </button>
        <button appButton (click)="onDeleteApartment()">
          Delete apartment
        </button>
      </div>
    </div>
  </div>
</div>
